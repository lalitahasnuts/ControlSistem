{
    "info": {
      "name": "–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ - API —Ç–µ—Å—Ç—ã",
      "description": "–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è API —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏",
      "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
      {
        "key": "baseUrl",
        "value": "http://localhost:5000/api",
        "type": "string"
      },
      {
        "key": "authToken",
        "value": "",
        "type": "string"
      },
      {
        "key": "userId",
        "value": "",
        "type": "string"
      },
      {
        "key": "projectId",
        "value": "",
        "type": "string"
      },
      {
        "key": "defectId",
        "value": "",
        "type": "string"
      }
    ],
    "item": [
      {
        "name": "üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è",
        "item": [
          {
            "name": "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"Password123!\",\n  \"firstName\": \"–ò–≤–∞–Ω\",\n  \"lastName\": \"–ü–µ—Ç—Ä–æ–≤\",\n  \"role\": \"engineer\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/auth/register",
                "host": ["{{baseUrl}}"],
                "path": ["auth", "register"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "",
                    "pm.test(\"Response has token and user\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData.success).to.be.true;",
                    "    pm.expect(jsonData.token).to.be.a('string');",
                    "    pm.expect(jsonData.user).to.be.an('object');",
                    "    pm.expect(jsonData.user.email).to.equal('test@example.com');",
                    "});",
                    "",
                    "// –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤",
                    "pm.collectionVariables.set(\"authToken\", pm.response.json().token);",
                    "pm.collectionVariables.set(\"userId\", pm.response.json().user.id);"
                  ]
                }
              }
            ]
          },
          {
            "name": "–í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"Password123!\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/auth/login",
                "host": ["{{baseUrl}}"],
                "path": ["auth", "login"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "",
                    "pm.test(\"Successful login\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData.success).to.be.true;",
                    "    pm.expect(jsonData.token).to.be.a('string');",
                    "    pm.expect(jsonData.user.email).to.equal('test@example.com');",
                    "});",
                    "",
                    "// –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω",
                    "pm.collectionVariables.set(\"authToken\", pm.response.json().token);"
                  ]
                }
              }
            ]
          },
          {
            "name": "–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
            "request": {
              "method": "GET",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                }
              ],
              "url": {
                "raw": "{{baseUrl}}/auth/me",
                "host": ["{{baseUrl}}"],
                "path": ["auth", "me"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "",
                    "pm.test(\"User data returned\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData.success).to.be.true;",
                    "    pm.expect(jsonData.user).to.be.an('object');",
                    "    pm.expect(jsonData.user.email).to.equal('test@example.com');",
                    "});"
                  ]
                }
              }
            ]
          }
        ]
      },
      {
        "name": "üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏",
        "item": [
          {
            "name": "–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
            "request": {
              "method": "GET",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                }
              ],
              "url": {
                "raw": "{{baseUrl}}/users",
                "host": ["{{baseUrl}}"],
                "path": ["users"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "",
                    "pm.test(\"Users array returned\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData).to.be.an('array');",
                    "    pm.expect(jsonData.length).to.be.greaterThan(0);",
                    "});"
                  ]
                }
              }
            ]
          },
          {
            "name": "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                },
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"manager@company.com\",\n  \"password\": \"Manager123!\",\n  \"firstName\": \"–ê–Ω–Ω–∞\",\n  \"lastName\": \"–°–∏–¥–æ—Ä–æ–≤–∞\",\n  \"role\": \"manager\",\n  \"isActive\": true\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/users",
                "host": ["{{baseUrl}}"],
                "path": ["users"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 201\", function () {",
                    "    pm.response.to.have.status(201);",
                    "});",
                    "",
                    "pm.test(\"User created successfully\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData.email).to.equal('manager@company.com');",
                    "    pm.expect(jsonData.role).to.equal('manager');",
                    "    pm.expect(jsonData.id).to.be.a('string');",
                    "});"
                  ]
                }
              }
            ]
          }
        ]
      },
      {
        "name": "üèóÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏",
        "item": [
          {
            "name": "–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤",
            "request": {
              "method": "GET",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                }
              ],
              "url": {
                "raw": "{{baseUrl}}/projects",
                "host": ["{{baseUrl}}"],
                "path": ["projects"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "",
                    "pm.test(\"Projects array returned\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData).to.be.an('array');",
                    "    if (jsonData.length > 0) {",
                    "        pm.collectionVariables.set(\"projectId\", jsonData[0].id);",
                    "    }",
                    "});"
                  ]
                }
              }
            ]
          },
          {
            "name": "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                },
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"name\": \"–ñ–ö –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π\",\n  \"description\": \"–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∂–∏–ª–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Å–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞\",\n  \"address\": \"—É–ª. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è, 123\",\n  \"startDate\": \"2024-03-01\",\n  \"endDate\": \"2024-12-31\",\n  \"status\": \"planned\",\n  \"managerId\": \"{{userId}}\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/projects",
                "host": ["{{baseUrl}}"],
                "path": ["projects"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 201\", function () {",
                    "    pm.response.to.have.status(201);",
                    "});",
                    "",
                    "pm.test(\"Project created successfully\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData.name).to.equal('–ñ–ö –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π');",
                    "    pm.expect(jsonData.status).to.equal('planned');",
                    "    pm.expect(jsonData.id).to.be.a('string');",
                    "    pm.collectionVariables.set(\"projectId\", jsonData.id);",
                    "});"
                  ]
                }
              }
            ]
          },
          {
            "name": "–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ ID",
            "request": {
              "method": "GET",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                }
              ],
              "url": {
                "raw": "{{baseUrl}}/projects/{{projectId}}",
                "host": ["{{baseUrl}}"],
                "path": ["projects", "{{projectId}}"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "",
                    "pm.test(\"Project details returned\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData.id).to.equal(pm.collectionVariables.get(\"projectId\"));",
                    "    pm.expect(jsonData.name).to.be.a('string');",
                    "});"
                  ]
                }
              }
            ]
          }
        ]
      },
      {
        "name": "üêõ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç–∞–º–∏",
        "item": [
          {
            "name": "–°–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ñ–µ–∫—Ç–∞",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                },
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"title\": \"–¢—Ä–µ—â–∏–Ω–∞ –≤ –Ω–µ—Å—É—â–µ–π —Å—Ç–µ–Ω–µ\",\n  \"description\": \"–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Ç—Ä–µ—â–∏–Ω–∞ —à–∏—Ä–∏–Ω–æ–π 2–º–º –≤ –Ω–µ—Å—É—â–µ–π —Å—Ç–µ–Ω–µ –Ω–∞ 3 —ç—Ç–∞–∂–µ\",\n  \"priority\": \"high\",\n  \"status\": \"new\",\n  \"projectId\": \"{{projectId}}\",\n  \"assigneeId\": \"{{userId}}\",\n  \"reporterId\": \"{{userId}}\",\n  \"dueDate\": \"2024-02-15\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/defects",
                "host": ["{{baseUrl}}"],
                "path": ["defects"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 201\", function () {",
                    "    pm.response.to.have.status(201);",
                    "});",
                    "",
                    "pm.test(\"Defect created successfully\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData.title).to.equal('–¢—Ä–µ—â–∏–Ω–∞ –≤ –Ω–µ—Å—É—â–µ–π —Å—Ç–µ–Ω–µ');",
                    "    pm.expect(jsonData.priority).to.equal('high');",
                    "    pm.expect(jsonData.id).to.be.a('string');",
                    "    pm.collectionVariables.set(\"defectId\", jsonData.id);",
                    "});"
                  ]
                }
              }
            ]
          },
          {
            "name": "–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–µ—Ñ–µ–∫—Ç–æ–≤",
            "request": {
              "method": "GET",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                }
              ],
              "url": {
                "raw": "{{baseUrl}}/defects",
                "host": ["{{baseUrl}}"],
                "path": ["defects"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "",
                    "pm.test(\"Defects array returned\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData).to.be.an('array');",
                    "});"
                  ]
                }
              }
            ]
          },
          {
            "name": "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –∫ –¥–µ—Ñ–µ–∫—Ç—É",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                },
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"content\": \"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥–µ—Ñ–µ–∫—Ç. –¢—Ä–µ–±—É–µ—Ç—Å—è –æ—Ü–µ–Ω–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ –∏–Ω–∂–µ–Ω–µ—Ä–∞.\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/defects/{{defectId}}/comments",
                "host": ["{{baseUrl}}"],
                "path": ["defects", "{{defectId}}", "comments"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 201\", function () {",
                    "    pm.response.to.have.status(201);",
                    "});",
                    "",
                    "pm.test(\"Comment added successfully\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData.content).to.include('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å');",
                    "    pm.expect(jsonData.id).to.be.a('string');",
                    "});"
                  ]
                }
              }
            ]
          }
        ]
      },
      {
        "name": "üìä –û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞",
        "item": [
          {
            "name": "–ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –ø–æ –¥–µ—Ñ–µ–∫—Ç–∞–º",
            "request": {
              "method": "GET",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                }
              ],
              "url": {
                "raw": "{{baseUrl}}/reports/defects",
                "host": ["{{baseUrl}}"],
                "path": ["reports", "defects"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "",
                    "pm.test(\"Report data returned\", function () {",
                    "    var jsonData = pm.response.json();",
                    "    pm.expect(jsonData.totalDefects).to.be.a('number');",
                    "    pm.expect(jsonData.defectsByStatus).to.be.an('array');",
                    "    pm.expect(jsonData.defectsByPriority).to.be.an('array');",
                    "});"
                  ]
                }
              }
            ]
          },
          {
            "name": "–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞ –≤ CSV",
            "request": {
              "method": "GET",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer {{authToken}}"
                }
              ],
              "url": {
                "raw": "{{baseUrl}}/reports/export/csv",
                "host": ["{{baseUrl}}"],
                "path": ["reports", "export", "csv"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "",
                    "pm.test(\"CSV file returned\", function () {",
                    "    pm.expect(pm.response.headers.get('Content-Type')).to.include('text/csv');",
                    "    pm.expect(pm.response.headers.get('Content-Disposition')).to.include('attachment');",
                    "});"
                  ]
                }
              }
            ]
          }
        ]
      },
      {
        "name": "üõ°Ô∏è –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
        "item": [
          {
            "name": "–î–æ—Å—Ç—É–ø –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏",
            "request": {
              "method": "GET",
              "header": [],
              "url": {
                "raw": "{{baseUrl}}/projects",
                "host": ["{{baseUrl}}"],
                "path": ["projects"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 401\", function () {",
                    "    pm.response.to.have.status(401);",
                    "});"
                  ]
                }
              }
            ]
          },
          {
            "name": "–î–æ—Å—Ç—É–ø —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º",
            "request": {
              "method": "GET",
              "header": [
                {
                  "key": "Authorization",
                  "value": "Bearer invalid_token_123"
                }
              ],
              "url": {
                "raw": "{{baseUrl}}/projects",
                "host": ["{{baseUrl}}"],
                "path": ["projects"]
              }
            },
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Status code is 401\", function () {",
                    "    pm.response.to.have.status(401);",
                    "});"
                  ]
                }
              }
            ]
          }
        ]
      }
    ],
    "event": [
      {
        "listen": "prerequest",
        "script": {
          "type": "text/javascript",
          "exec": [
            "console.log('–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ API —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã');"
          ]
        }
      }
    ]
  }